# POAP Scrapper

This scrapper is getting POAP data event data from POAP's official API and getting token data from 2 different subgraphs (1 for ethereum and the other gnosis chain), details about urls can be found [here](parameters.yaml).

## How to use the scrapper

This scrapper was coded in Python, and uses ArgParse for the specification of some key parameters.

```
usage: PoapScrapper.py [-h] -o out_path [-c]

POAP Event and Token Scrapper.

Arguments:
  -h, --help            show this help message and exit
  -o out_path, --out out_path
                  The location for the folder containing the result of the scrapping.
  -p, --params parameters_file
                  The name for the parameter file like 'parameters.yaml'
  -c ,
      Enables the checkpoint system.
```

### Parameters

For subgraphs and the POAP event API urls you can set them using a .yaml file. If you want to set a new file you can use the `-p` flag. In case you don't use this flag, the script will assume you have a parameter file called `parameters.yaml` in the root directory.

File strucuture:

```
poap_api: "EVENT_API_URL"
eth_subgraph: "ETHEREUM_SUBGRAPH_URL"
gchain_subgraph: "GNOSIS_CHAIN_SUBGRAPH_URL"
```

### The checkpoint system

Thinking about programatic applications for this scrapper, there is the option of running this script using checkpoints. Checkpoints are **always** generated after you run the script and it stores the latest timestamp (_for the last token_id scrapped_) in a json file: `/results/checkpoints.json`.

If you choose to run this using the checkpoint system, you should use the flag `-c`. When this flag is assigned, the script will use the info in the file to check what is the timestamp it needs to start scrapping for.

**Important**: it's preferable that you never edit this file, using it as it is generated by the script.
